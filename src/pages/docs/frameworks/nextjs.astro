---
import DocsLayout from "../../../layouts/DocsLayout.astro";
---

<DocsLayout title="Next.js Integration - Infinity Metrics">
  <h1>Next.js Integration</h1>
  <p>
    Complete guide to integrating Infinity Metrics with Next.js applications
    using both App Router and Pages Router.
  </p>

  <h2>Installation</h2>
  <p>Add the tracking script to your Next.js app:</p>
  <pre><code>// app/layout.tsx (App Router) or pages/_app.tsx (Pages Router)
import Script from 'next/script'

export default function RootLayout(&#123; children &#125;) &#123;
  return (
    &lt;html&gt;
      &lt;head&gt;
        &lt;Script src="https://your-domain.com/infinity.js" strategy="afterInteractive" /&gt;
        &lt;Script id="infinity-init" strategy="afterInteractive"&gt;
          &#123;`
            Infinity.init(&#123;
              site_id: 'your-site-id'
            &#125;);
          `&#125;
        &lt;/Script&gt;
      &lt;/head&gt;
      &lt;body&gt;&#123;children&#125;&lt;/body&gt;
    &lt;/html&gt;
  )
&#125;</code></pre>

  <h2>App Router (Next.js 13+)</h2>
  <p>For App Router, add the script to your root layout:</p>
  <pre><code>// app/layout.tsx
import Script from 'next/script'

export default function RootLayout(&#123; children &#125;) &#123;
  return (
    &lt;html&gt;
      &lt;head&gt;
        &lt;Script src="https://your-domain.com/infinity.js" strategy="afterInteractive" /&gt;
      &lt;/head&gt;
      &lt;body&gt;&#123;children&#125;&lt;/body&gt;
    &lt;/html&gt;
  )
&#125;</code></pre>

  <h2>Pages Router (Next.js 12 and below)</h2>
  <p>For Pages Router, add the script to your _app.tsx:</p>
  <pre><code>// pages/_app.tsx
import Script from 'next/script'

export default function App(&#123; Component, pageProps &#125;) &#123;
  return (
    &lt;&gt;
      &lt;Script src="https://your-domain.com/infinity.js" strategy="afterInteractive" /&gt;
      &lt;Component &#123;...pageProps&#125; /&gt;
    &lt;/&gt;
  )
&#125;</code></pre>

  <h2>Custom Events</h2>
  <p>Track custom events in your Next.js components:</p>
  <pre><code>// components/Button.tsx
export default function Button() &#123;
  const handleClick = () =&gt; &#123;
    Infinity.track('button_click', &#123;
      button_name: 'CTA Button',
      page: window.location.pathname
    &#125;);
  &#125;;

  return &lt;button onClick=&#123;handleClick&#125;&gt;Click me&lt;/button&gt;
&#125;</code></pre>

  <h2>Environment Variables</h2>
  <p>Use environment variables for configuration:</p>
  <pre><code>// next.config.js
module.exports = &#123;
  env: &#123;
    INFINITY_SITE_ID: process.env.INFINITY_SITE_ID,
    INFINITY_DOMAIN: process.env.INFINITY_DOMAIN,
  &#125;
&#125;</code></pre>

  <p>Next: <a href="/docs/frameworks/react">React Integration</a></p>
</DocsLayout>
